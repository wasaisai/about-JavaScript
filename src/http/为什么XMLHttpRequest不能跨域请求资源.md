浏览器安全可以分为三大块——Web页面安全、浏览器网络安全和浏览器系统安全.  
**页面中最基础、最核心的安全策略: 同源策略(Same-origin policy)**

如果两个URL的协议、域名和端口都相同, 我们就称这两个URL同源.  浏览器默认两个相同源之间是可以相互访问资源和操作DOM的.  
两个不同源之间若想要相互访问资源或者操作DOM, 那么会有一套基础的安全策略的制约, 我们把这称为同源策略.
 
具体来讲, 同源策略主要表现在DOM、Web数据和网络这三个层面.  
1. DOM层面. 同源策略限制了来自不同源的js脚本对当前DOM对象读和写的操作.   
2. 数据层面. 同源策略限制了不同源的站点读取当前站点的Cookie、IndexDB、LocalStorage等数据.  
3. 网络层面. 同源策略限制了通过XMLHttpRequest等方式将站点的数据发送给不同源的站点.  

### 浏览器出让的同源策略的安全性  
1. 页面中可以嵌入第三方资源
当点击了页面中一个恶意链接, 恶意js代码可以读取页面数据并将其发送给服务器, 这是一个非常典型的XSS攻击.  
为了解决XSS攻击, 浏览器中引入了内容安全策略, 称为CSP. CSP的核心思想是让服务器决定浏览器能够加载那些资源, 让服务器决定浏览器是否能够执行内联js代码. 

2. 跨域资源共享(CORS)和跨文档消息机制  
默认情况下, 如果打开baidu.com的页面, 在baidu.com中通过XMLHttpRequest或者Fetch来请求InfoQ中的资源, 这时同源策略会阻止其向InfoQ发出请求, 这样会大大制约我们的生产力.  
为了解决这个问题, 我们引入了**跨域资源共享(CORS)**, 使用该机制可以进行跨域访问控制, 从而使跨域数据传输得以安全进行.  

在实际应用中, 经常需要两个不同源的DOM之间进行通信, 于是浏览器中又引入了**跨文档消息机制**, 可以通过window.postMessage的js接口来和不同源的DOM进行通信.  

