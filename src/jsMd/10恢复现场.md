### 恢复现场  
比如在foo函数中调用bar函数, 当bar函数执行完成之后, 需要将调用栈的控制权转交给foo函数, 这意味着需要将栈的状态恢复到foo函数执行时的状态, 我们把这个过程叫**恢复现场** .  

**实现方法**
只要在寄存器中保存一个永远指向当前栈顶的指针, 栈顶指针的作用就是告诉你应该往哪搁位置添加新的元素, 这个指针通常放在esp及村子中.  
如果你想往栈中添加一个元素, 那么需要先根据esp寄存器找到当前栈顶的位置, 然后在栈顶上方添加新元素, 新元素添加之后, 还需要将新元素的地址更新到esp寄存器中.   
有了栈顶指针, 就很容易恢复foo函数执行现场了, 当bar函数执行结束时, 只需要将栈顶指针向下移动就可以了.   


### cpu是如何知道要移动到目标地址呢?  
CPU的解决方法是增加哀乐另外一个edp寄存器, 用来保存当前函数的起始位置, 我们把一个函数的起始位置也称为栈帧指针, edp寄存器中保存的就是当前函数的栈帧执政.  
